{% load static %}
<!doctype html>
<html class="no-js" lang="">

<head>

    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>List page</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
	
    <!-- favicon
		============================================ -->
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">
    <!-- Google Fonts
		============================================ -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900" rel="stylesheet">
    <!-- Bootstrap CSS
		============================================ -->
    <link rel="stylesheet" href="{% static '/css/bootstrap.min.css' %}">
    <!-- font awesome CSS
		============================================ -->
    <link rel="stylesheet" href="../static/css/font-awesome.min.css">
    <!-- owl.carousel CSS
		============================================ -->
    <link rel="stylesheet" href="../static/css/owl.carousel.css">
    <link rel="stylesheet" href="../static/css/owl.theme.css">
    <link rel="stylesheet" href="../static/css/owl.transitions.css">
    <!-- animate CSS
		============================================ -->
    <link rel="stylesheet" href="../static/css/animate.css">
    <!-- normalize CSS
		============================================ -->
    <link rel="stylesheet" href="../static/css/normalize.css">
    <!-- mCustomScrollbar CSS
		============================================ -->
    <link rel="stylesheet" href="../static/css/scrollbar/jquery.mCustomScrollbar.min.css">
    <!-- wave CSS
		============================================ -->
    <link rel="stylesheet" href="../static/css/wave/waves.min.css">
    <!-- Notika icon CSS
		============================================ -->
    <link rel="stylesheet" href="../static/css/notika-custom-icon.css">
    <!-- main CSS
		============================================ -->
    <link rel="stylesheet" href="../static/css/main.css">
    <!-- style CSS
		============================================ -->
    <link rel="stylesheet" href="../static/css/cssstyles.css">
    <!-- responsive CSS
		============================================ -->
    <link rel="stylesheet" href="../static/css/responsive.css">
    <!-- modernizr JS
		============================================ -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    
    <link rel="stylesheet" href="../static/css/mystyle.css">

</head>
<body>
    <!-- Start Header Top Area -->
    <div class="header-top-area">
      <div class="container">
        <div class="row">
          <div class="col-lg-4 col-md-4 col-sm-12 col-xs-12">
            <div class="logo-area">
              <a href="#"
                ><p style="color: white; font-size: 25px; font-weight: bold;">INNOSPACE</p></a
              >
            </div>
          </div>
          <div class="col-lg-8 col-md-8 col-sm-12 col-xs-12">
            <div class="header-top-menu">
              <ul class="nav navbar-nav notika-top-nav">
                <li class="nav-item">
                  <a href="/register" role="button"><span class="glyphicon glyphicon-plus"></span></a>
              </li>
                <li class="nav-item">
                    <a href="/" role="button"><span class="glyphicon glyphicon-log-out"></span></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <br /><br /><br><br><br>
    <!-- Start Status area -->
    <div class="notika-status-area">
      <div class="container">
          <div class="row" id="tracker-device-list">
              
          </div>
      </div>
  </div>
    <!-- End Status area-->
    
    <br />
    <!-- Start Footer area-->
    <div class="footer-copyright-area">
      <div class="container">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="footer-copy-right">
              <p>Copyright Â© 2024 . All rights reserved.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
     <!-- jquery
		============================================ -->
        <script src="../static/js/vendor/jquery-1.12.4.min.js"></script>
        <!-- bootstrap JS
            ============================================ -->
        <script src="../static/js/bootstrap.min.js"></script>
        <!-- wow JS
            ============================================ -->
        <script src="../static/js/wow.min.js"></script>
        <!-- price-slider JS
            ============================================ -->
        <script src="../static/js/jquery-price-slider.js"></script>
        <!-- owl.carousel JS
            ============================================ -->
        <script src="../static/js/owl.carousel.min.js"></script>
        <!-- scrollUp JS
            ============================================ -->
        <script src="../static/js/jquery.scrollUp.min.js"></script>
        <!-- meanmenu JS
            ============================================ -->
        <script src="../static/js/meanmenu/jquery.meanmenu.js"></script>
        <!-- counterup JS
            ============================================ -->
        <script src="../static/js/counterup/jquery.counterup.min.js"></script>
        <script src="../static/js/counterup/waypoints.min.js"></script>
        <script src="../static/js/counterup/counterup-active.js"></script>
        <!-- mCustomScrollbar JS
            ============================================ -->
        <script src="../static/js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
        <!-- sparkline JS
            ============================================ -->
        <script src="../static/js/sparkline/jquery.sparkline.min.js"></script>
        <script src="../static/js/sparkline/sparkline-active.js"></script>
        <!-- flot JS
            ============================================ -->
        <script src="../static/js/flot/jquery.flot.js"></script>
        <script src="../static/js/flot/jquery.flot.resize.js"></script>
        <script src="../static/js/flot/flot-active.js"></script>
        <!-- knob JS
            ============================================ -->
        <script src="../static/js/knob/jquery.knob.js"></script>
        <script src="../static/js/knob/jquery.appear.js"></script>
        <script src="../static/js/knob/knob-active.js"></script>
        <!--  Chat JS
            ============================================ -->
        <script src="../static/js/chat/jquery.chat.js"></script>
        <!--  wave JS
            ============================================ -->
        <script src="../static/js/wave/waves.min.js"></script>
        <script src="../static/js/wave/wave-active.js"></script>
        <!-- icheck JS
            ============================================ -->
        <script src="../static/js/icheck/icheck.min.js"></script>
        <script src="../static/js/icheck/icheck-active.js"></script>
        <!--  todo JS
            ============================================ -->
        <script src="../static/js/todo/jquery.todo.js"></script>
        <!-- Login JS
            ============================================ -->
        <script src="../static/js/login/login-action.js"></script>
        <!-- plugins JS
            ============================================ -->
        <script src="../static/js/plugins.js"></script>
        <!-- main JS
            ============================================ -->
        <script src="../static/js/main.js"></script>
        
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <script>
          $(document).ready(function() {
              function displayTrackerDevices() {
                  $.ajax({
                      url: '/listpage/api/tracker-devices/',
                      type: 'GET',
                      success: function(data) {
                          $('#tracker-device-list').empty();
                          if (data.length > 0) {
                              data.forEach(function(device) {
                                  var deviceHtml = `
                                  <div class="col-lg-3 col-md-6 col-sm-6 col-xs-12">
                                    <a href="/devicedashboard?device_id=${device.device_id}" methods=["GET"]>
                                        <div class="wb-traffic-inner notika-shadow sm-res-mg-t-30 tb-res-mg-t-30">
                                            <div class="website-traffic-ctn">
                                                <div class="widget-img-head">
                                                    <div class="widget-status"></div>
                                                    <div style="display: flex; flex-direction: column;margin-left: 20px; justify-content: center;">
                                                        <h2 class="widget-head">${device.vehicle_name}</h2>
                                                        <p style="margin-top: -10px;">ID: ${device.device_id}</p>
                                                    </div>
                                                </div>
                                                <div class="widget-head-value">
                                                    <div>
                                                        <div class="widget-distance-head">Model</div>
                                                        <div class="widget-distance-value">${device.device_model}</div>
                                                    </div>
                                                    <div>
                                                        <div class="widget-distance-head">Vehicle ID</div>
                                                        <div class="widget-distance-value">${device.vehicle_id}</div>
                                                    </div>
                                                    <div>
                                                        <div class="widget-distance-head">Driver</div>
                                                        <div class="widget-distance-value">${device.driver}</div>
                                                    </div>
                                                </div>  
                                            </div> 
                                        </div>
                                    </a>
                                </div>
                                  `;
                                  $('#tracker-device-list').append(deviceHtml);
                              });
                          } else {
                              $('#tracker-device-list').html('<p>No devices found.</p>');
                          }
                      },
                      error: function(xhr, textStatus, error) {
                          console.log(xhr.statusText);
                          console.log(textStatus);
                          console.log(error);
                      }
                  });
              }
              displayTrackerDevices();
              setInterval(displayTrackerDevices, 5000);
          });
          </script>

</body>